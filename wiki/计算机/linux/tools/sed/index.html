<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    <title>sed | Noodlefighter's Wiki</title>
    
    
        <meta name="keywords" content="sed">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="使用例例1.从配置文件中筛选出某项123bss[0]=wlan0bssid[0]=c8:02:8f:03:3f:d6ssid[0]=9377-5G-open 取出ssid[0]项： 1hostapd_cli -i wlan0 status|sed -n 's/^ssid\[0\]=\(.*\)/\1/p'  ^匹配行首（对应$匹配行末） -n静默模式，仅打印需要打印的地方 s替换，这里的\(和\)">
<meta property="og:type" content="article">
<meta property="og:title" content="sed">
<meta property="og:url" content="http://wiki.noodlefighter.com/wiki/计算机/linux/tools/sed/index.html">
<meta property="og:site_name" content="Noodlefighter's Wiki">
<meta property="og:description" content="使用例例1.从配置文件中筛选出某项123bss[0]=wlan0bssid[0]=c8:02:8f:03:3f:d6ssid[0]=9377-5G-open 取出ssid[0]项： 1hostapd_cli -i wlan0 status|sed -n 's/^ssid\[0\]=\(.*\)/\1/p'  ^匹配行首（对应$匹配行末） -n静默模式，仅打印需要打印的地方 s替换，这里的\(和\)">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-12-22T08:30:37.032Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sed">
<meta name="twitter:description" content="使用例例1.从配置文件中筛选出某项123bss[0]=wlan0bssid[0]=c8:02:8f:03:3f:d6ssid[0]=9377-5G-open 取出ssid[0]项： 1hostapd_cli -i wlan0 status|sed -n 's/^ssid\[0\]=\(.*\)/\1/p'  ^匹配行首（对应$匹配行末） -n静默模式，仅打印需要打印的地方 s替换，这里的\(和\)">
    

    
        <link rel="alternate" href="/atom.xml" title="Noodlefighter's Wiki" type="application/atom+xml">
    

    
        <link rel="icon" href="/favicon.ico">
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">
    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>
    <meta name="generator" content="Hexo 3.9.0"><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    

</head><body>
    



    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Noodlefighter's Wiki</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">首页</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tbody><tr>
                
                    <td><a class="main-nav-link" href="/">首页</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                <td>
                    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
    </div>

                </td>
            </tr>
        </tbody></table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        <div class="widget-wrap" id="categories">
        <h3 class="widget-title">
            <span>分类</span>
             
            <a id="allExpand" href="#">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        
        
         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            人文社科
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/人文社科/efficiency/">efficiency</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            待阅读后删除
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/待阅读后删除/btrfs和嵌入式/">btrfs和嵌入式</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            心理学
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/心理学/社会心理学学习笔记/">社会心理学学习笔记</a></li>  <li class="file"><a href="/wiki/心理学/达克效应/">达克效应</a></li>  <li class="file"><a href="/wiki/心理学/攻击性相关/">攻击性相关</a></li>  <li class="file"><a href="/wiki/心理学/vals-value-and-lifesylte/">VALS_value-and-lifesylte</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            日常
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            烹饪
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            油炸系
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/日常/烹饪/油炸系/炸猪排/">炸猪排</a></li>  <li class="file"><a href="/wiki/日常/烹饪/油炸系/牛肉饼/">牛肉饼</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            饭团系
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/日常/烹饪/饭团系/盐饭团/">盐饭团</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            装修
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/日常/装修/装修/">装修</a></li>  <li class="file"><a href="/wiki/日常/装修/如何优雅地拒绝装修公司的套路/">如何优雅地拒绝装修公司的套路</a></li>  <li class="file"><a href="/wiki/日常/装修/净水器/">净水器</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            麻将
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/日常/麻将/在意的牌谱/">在意的牌谱</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/日常/发霉/">发霉</a></li>  <li class="file"><a href="/wiki/日常/洗碗机/">洗碗机</a></li>  <li class="file"><a href="/wiki/日常/信用卡被盗刷怎么办/">信用卡被盗刷怎么办</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            杂学
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/杂学/白酒勾兑工艺/">白酒勾兑工艺</a></li>  <li class="file"><a href="/wiki/杂学/膳食纤维与食品健康/">膳食纤维与食品健康</a></li>  <li class="file"><a href="/wiki/杂学/脑机接口bci/">脑机接口BCI</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            电子工程
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            IoT
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/电子工程/IoT/iot组网方式/">IoT组网方式</a></li>  <li class="file"><a href="/wiki/电子工程/IoT/lora/">lora</a></li>  <li class="file"><a href="/wiki/电子工程/IoT/ble/">ble</a></li>  <li class="file"><a href="/wiki/电子工程/IoT/空间取电/">空间取电</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            嵌入式开源项目
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/ai相关/">AI相关</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/gui相关/">GUI相关</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/储存及文件系统/">储存及文件系统</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/开源硬件/">开源硬件</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/类似的收集地/">类似的收集地</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/网络相关/">网络相关</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/脚本/">脚本</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/视频图像/">视频图像</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/算法/">算法</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/通讯和总线协议/">通讯和总线协议</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/嵌入式软件平台/">嵌入式软件平台</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式开源项目/开发过程/">开发过程</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            嵌入式硬件
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/电子工程/嵌入式硬件/双核异构/">双核异构</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式硬件/总线技术/">总线技术</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            嵌入式软件
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/电子工程/嵌入式软件/rtos/">rtos</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式软件/嵌入式程序执行框架/">嵌入式程序执行框架</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式软件/golang开发嵌入式软件可行性/">Golang开发嵌入式软件可行性</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式软件/嵌入式软件快速原型开发的探索与思考/">嵌入式软件快速原型开发的探索与思考</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式软件/活动对象框架/">活动对象框架</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式软件/ble蓝牙/">ble蓝牙</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式软件/树莓派基本使用/">树莓派基本使用</a></li>  <li class="file"><a href="/wiki/电子工程/嵌入式软件/ssdp简单设备发现协议/">SSDP简单设备发现协议</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/电子工程/mosfet/">mosfet</a></li>  <li class="file"><a href="/wiki/电子工程/电子相关材料materials/">电子相关材料materials</a></li>  <li class="file"><a href="/wiki/电子工程/绕线工艺/">绕线工艺</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            自然语言
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            日语
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/自然语言/日语/翻译中遇到的生词/">翻译中遇到的生词</a></li>  <li class="file"><a href="/wiki/自然语言/日语/计算机术语-日语/">计算机术语_日语</a></li>  <li class="file"><a href="/wiki/自然语言/日语/在意的日语词汇/">在意的日语词汇</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            翻译
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            听译练习
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/自然语言/翻译/听译练习/chobits13/">chobits13</a></li>  <li class="file"><a href="/wiki/自然语言/翻译/听译练习/双叶杏mad/">双叶杏MAD</a></li>  <li class="file"><a href="/wiki/自然语言/翻译/听译练习/探偵オペラ5/">探偵オペラ5</a></li>  <li class="file"><a href="/wiki/自然语言/翻译/听译练习/探偵オペラ6/">探偵オペラ6</a></li>  <li class="file"><a href="/wiki/自然语言/翻译/听译练习/黑白小姐2/">黑白小姐2</a></li>  <li class="file"><a href="/wiki/自然语言/翻译/听译练习/黑白小姐3/">黑白小姐3</a></li>  <li class="file"><a href="/wiki/自然语言/翻译/听译练习/黑白小姐1/">黑白小姐1</a></li>  <li class="file"><a href="/wiki/自然语言/翻译/听译练习/黑白小姐4/">黑白小姐4</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            杂碎作品
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/自然语言/翻译/杂碎作品/草人的北酱时雨情人节黑童话/">草人的北酱时雨情人节黑童话</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/自然语言/翻译/翻译相关工具/">翻译相关工具</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            英语
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/自然语言/英语/计算机术语/">计算机术语</a></li>  <li class="file"><a href="/wiki/自然语言/英语/日常/">日常</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            艺术
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            摄影
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/艺术/摄影/hdr研究/">HDR研究</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            音乐
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            歌词
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/艺术/音乐/歌词/a-day-in-the-s-i-o-u/">A-Day-in-the-S.I.O.U</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            谱子
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/艺术/音乐/谱子/口琴谱/">口琴谱</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/艺术/音乐/音乐基础学习/">音乐基础学习</a></li>  <li class="file"><a href="/wiki/艺术/音乐/音乐相关工具/">音乐相关工具</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                             
                            计算机
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            android
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/android/android-source-code/">android_source_code</a></li>  <li class="file"><a href="/wiki/计算机/android/android-usb-accessory/">android_usb_accessory</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                             
                            linux
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            devtools
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/linux/devtools/dkms/">DKMS</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/automake/">automake</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/busybox/">busybox</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/git-crypt/">git-crypt</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/memtool/">memtool</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/pkg-config/">pkg-config</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/内存泄漏检测/">内存泄漏检测</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/动态链接/">动态链接</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/编译相关/">编译相关</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/gnubinutils/">GNUBinutils</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/git-repo/">git-repo</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/xxd/">xxd</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/加壳和压缩/">加壳和压缩</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/buildroot/">buildroot</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/expect/">expect</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/内核相关/">内核相关</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/strace和ltrace/">strace和ltrace</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/errno/">errno</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/gdb/">gdb</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/telnet/">telnet</a></li>  <li class="file"><a href="/wiki/计算机/linux/devtools/git/">git</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            distribution
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/linux/distribution/snap打包方式/">snap打包方式</a></li>  <li class="file"><a href="/wiki/计算机/linux/distribution/linux发行版内核编译/">linux发行版内核编译</a></li>  <li class="file"><a href="/wiki/计算机/linux/distribution/linux包管理器/">linux包管理器</a></li>  <li class="file"><a href="/wiki/计算机/linux/distribution/linux桌面环境配置/">linux桌面环境配置</a></li>  <li class="file"><a href="/wiki/计算机/linux/distribution/manjaro布置/">manjaro布置</a></li>  <li class="file"><a href="/wiki/计算机/linux/distribution/linux桌面系统维护笔记/">linux桌面系统维护笔记</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            kernel
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/linux/kernel/linux-list/">linux-list</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/netlink/">Netlink</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/异步io/">异步IO</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/eventfd/">eventfd</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/linux-userspace-api/">linux_userspace_api</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/uevent/">uevent</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/linux的loglevel/">linux的loglevel</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/linux的panic和oops/">linux的panic和oops</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/内核模块调试ftrace/">内核模块调试ftrace</a></li>  <li class="file"><a href="/wiki/计算机/linux/kernel/linux-usb-gadget/">linux_usb_gadget</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                             
                            tools
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/linux/tools/crontab/">crontab</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/enca/">enca</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/filesystem/">filesystem</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/heredoc/">heredoc</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/gpg/">gpg</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/locate/">locate</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/patch/">patch</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/rsync/">rsync</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/redsocks/">redsocks</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/samba/">samba</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/supervisor/">supervisor</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/tee/">tee</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/vi/">vi</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/wget/">wget</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/缩小镜象文件/">缩小镜象文件</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/iperf/">iperf</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/lrzsz/">lrzsz</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/linux网络相关工具/">linux网络相关工具</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/chroot/">chroot</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/date/">date</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/tmux/">tmux</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/bash/">bash</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/hostapd/">hostapd</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/openssl/">openssl</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/start-stop-daemon/">start-stop-daemon</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/udisks/">udisks</a></li>  <li class="file active"><a href="/wiki/计算机/linux/tools/sed/">sed</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/sudo/">sudo</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/linux自带工具/">linux自带工具</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/xdelta/">xdelta</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/systemd/">systemd</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/udev/">udev</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/fontforge/">fontforge</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/图形桌面相关工具/">图形桌面相关工具</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/linux常用工具/">linux常用工具</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/i3wm/">i3wm</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/stow/">stow</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/fuse/">fuse</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/netcat/">netcat</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/nfs/">nfs</a></li>  <li class="file"><a href="/wiki/计算机/linux/tools/ssh/">ssh</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            userspace
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/linux/userspace/linux-socket-tcp/">linux-socket-tcp</a></li>  <li class="file"><a href="/wiki/计算机/linux/userspace/pid-file/">pid-file</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/计算机/linux/动态链接/">动态链接</a></li>  <li class="file"><a href="/wiki/计算机/linux/嵌入式linux升级相关/">嵌入式linux升级相关</a></li>  <li class="file"><a href="/wiki/计算机/linux/构建/">构建</a></li>  <li class="file"><a href="/wiki/计算机/linux/在无mmu的linux下编程/">在无MMU的Linux下编程</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux多用户管理/">linux多用户管理</a></li>  <li class="file"><a href="/wiki/计算机/linux/unix网络编程/">unix网络编程</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux启动流程/">linux启动流程</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux存储相关/">linux存储相关</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux学习/">linux学习</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux上实现双向进程间通信管道/">Linux上实现双向进程间通信管道</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux网络调优/">linux网络调优</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux常用api/">linux常用api</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux文件系统/">linux文件系统</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux缓存回收/">linux缓存回收</a></li>  <li class="file"><a href="/wiki/计算机/linux/framebuffer驱动/">framebuffer驱动</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux的input子系统/">linux的input子系统</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux键盘布局相关/">linux键盘布局相关</a></li>  <li class="file"><a href="/wiki/计算机/linux/linux文件操作/">linux文件操作</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            windows
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            tools
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/windows/tools/windows常用工具/">windows常用工具</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/计算机/windows/windows中遇到的问题/">windows中遇到的问题</a></li>  <li class="file"><a href="/wiki/计算机/windows/win10ltsb/">win10ltsb</a></li>  <li class="file"><a href="/wiki/计算机/windows/windows的iocp模型/">windows的IOCP模型</a></li>  <li class="file"><a href="/wiki/计算机/windows/windows技巧集/">windows技巧集</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            信息安全
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/信息安全/密文攻击/">密文攻击</a></li>  <li class="file"><a href="/wiki/计算机/信息安全/隐写术/">隐写术</a></li>  <li class="file"><a href="/wiki/计算机/信息安全/rsa加密/">rsa加密</a></li>  <li class="file"><a href="/wiki/计算机/信息安全/pe行为分析/">PE行为分析</a></li>  <li class="file"><a href="/wiki/计算机/信息安全/无文件执行程序/">无文件执行程序</a></li>  <li class="file"><a href="/wiki/计算机/信息安全/反弹shell/">反弹shell</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            前端技术
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            tools
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/前端技术/tools/前端常用工具/">前端常用工具</a></li>  <li class="file"><a href="/wiki/计算机/前端技术/tools/selenium/">selenium</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/计算机/前端技术/webassembly/">webassembly</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            待整理
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/待整理/elevator-schedule/">elevator_schedule</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            攒机相关
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/攒机相关/硬盘选购/">硬盘选购</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            数据分析
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/数据分析/可视化相关工具/">可视化相关工具</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            算法
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/算法/压缩算法zigzag/">压缩算法zigzag</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            编程
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            C
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/编程/C/c语言静态检查/">C语言静态检查</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/cmocka/">cmocka</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/gnu-c匿名函数宏/">gnu-c匿名函数宏</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/用cpp程序测试c/">用CPP程序测试C</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/system函数/">system函数</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/c语言字符串处理/">c语言字符串处理</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/popen/">popen</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/pthread/">pthread</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/gcc下记录函数进入退出/">gcc下记录函数进入退出</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/ansi-c-and-posix/">ansi-c_and_posix</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/c语言中的时间/">c语言中的时间</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/gcc错误集/">gcc错误集</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/c语言实现读文件超时/">c语言实现读文件超时</a></li>  <li class="file"><a href="/wiki/计算机/编程/C/c语言函数的不定参数/">c语言函数的不定参数</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            CPP
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/编程/CPP/cpp多线程编程/">CPP多线程编程</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            Csharp
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/编程/Csharp/csharp-with-vscode/">csharp-with-vscode</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            JAVA
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/编程/JAVA/java-runtime/">java_runtime</a></li>  <li class="file"><a href="/wiki/计算机/编程/JAVA/java-web/">java_web</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            QT
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/编程/QT/qtablewidget/">QTableWidget</a></li>  <li class="file"><a href="/wiki/计算机/编程/QT/qt拖放/">QT拖放</a></li>  <li class="file"><a href="/wiki/计算机/编程/QT/qt计算md5校验值/">QT计算md5校验值</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            go
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/编程/go/go记录/">go记录</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            中间件
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/编程/中间件/类似libevent的库/">类似libevent的库</a></li>  <li class="file"><a href="/wiki/计算机/编程/中间件/protocol-buffer/">protocol_buffer</a></li>  <li class="file"><a href="/wiki/计算机/编程/中间件/sdl库/">sdl库</a></li>  <li class="file"><a href="/wiki/计算机/编程/中间件/imgui/">imgui</a></li>  <li class="file"><a href="/wiki/计算机/编程/中间件/opengl/">opengl</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/计算机/编程/多线程编程/">多线程编程</a></li>  <li class="file"><a href="/wiki/计算机/编程/web压力测试工具/">web压力测试工具</a></li>  <li class="file"><a href="/wiki/计算机/编程/正则表达式/">正则表达式</a></li>  <li class="file"><a href="/wiki/计算机/编程/程序性能分析/">程序性能分析</a></li>  <li class="file"><a href="/wiki/计算机/编程/xmake/">xmake</a></li>  <li class="file"><a href="/wiki/计算机/编程/cmake/">cmake</a></li>  <li class="file"><a href="/wiki/计算机/编程/shell脚本编程/">shell脚本编程</a></li>  <li class="file"><a href="/wiki/计算机/编程/非阻塞同步技术/">非阻塞同步技术</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            虚拟技术
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/虚拟技术/虚拟机相关/">虚拟机相关</a></li>  <li class="file"><a href="/wiki/计算机/虚拟技术/proxmox显卡直通/">proxmox显卡直通</a></li>  <li class="file"><a href="/wiki/计算机/虚拟技术/docker/">docker</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            计算机网络
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/计算机网络/ne2000/">ne2000</a></li>  <li class="file"><a href="/wiki/计算机/计算机网络/伟大wall/">伟大wall</a></li>  <li class="file"><a href="/wiki/计算机/计算机网络/网络常识/">网络常识</a></li>  <li class="file"><a href="/wiki/计算机/计算机网络/可靠udp传输/">可靠UDP传输</a></li>  <li class="file"><a href="/wiki/计算机/计算机网络/内网穿透/">内网穿透</a></li>  <li class="file"><a href="/wiki/计算机/计算机网络/rtsp/">rtsp</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            软件工程
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/软件工程/多目标/">多目标</a></li>  <li class="file"><a href="/wiki/计算机/软件工程/测试/">测试</a></li>  <li class="file"><a href="/wiki/计算机/软件工程/管理多个构建目标的逻辑差异/">管理多个构建目标的逻辑差异</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                             
                            通用技术
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/计算机/通用技术/hexo/">hexo</a></li>  <li class="file"><a href="/wiki/计算机/通用技术/pandoc/">pandoc</a></li>  <li class="file"><a href="/wiki/计算机/通用技术/wireshark二次开发/">wireshark二次开发</a></li>  <li class="file"><a href="/wiki/计算机/通用技术/字符编码/">字符编码</a></li>  <li class="file"><a href="/wiki/计算机/通用技术/markdown/">markdown</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/uncategorized/"></a></li>  <li class="file"><a href="/wiki/uncategorized/"></a></li>  </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // 左键单独展开目录
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // 右键展开下属所有目录
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // 展开关闭所有目录按钮
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-计算机-linux-tools-sed" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/计算机/">计算机</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/计算机/linux/">linux</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/计算机/linux/tools/">tools</a>
    </div>

                        
                        <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/计算机/linux/tools/sed/">
            <time datetime="2019-09-02T00:00:00.000Z" itemprop="datePublished">2019-09-02</time>
        </a>
    </div>


                        
                        
                    </div>
                
                <h1 class="article-title" itemprop="name">
            sed
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <h2 id="使用例"><a href="#使用例" class="headerlink" title="使用例"></a>使用例</h2><h3 id="例1-从配置文件中筛选出某项"><a href="#例1-从配置文件中筛选出某项" class="headerlink" title="例1.从配置文件中筛选出某项"></a>例1.从配置文件中筛选出某项</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bss[0]=wlan0</span><br><span class="line">bssid[0]=c8:02:8f:03:3f:d6</span><br><span class="line">ssid[0]=9377-5G-open</span><br></pre></td></tr></tbody></table></figure>
<p>取出<code>ssid[0]</code>项：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostapd_cli -i wlan0 status|sed -n 's/^ssid\[0\]=\(.*\)/\1/p'</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><code>^</code>匹配行首（对应<code>$</code>匹配行末）</li>
<li><code>-n</code>静默模式，仅打印需要打印的地方</li>
<li><code>s</code>替换，这里的<code>\(</code>和<code>\)</code>是正则分组，<code>\1</code>表示分组1</li>
<li><code>p</code>打印命令</li>
</ul>
<h3 id="例2-修改配置文件中的某项"><a href="#例2-修改配置文件中的某项" class="headerlink" title="例2.修改配置文件中的某项"></a>例2.修改配置文件中的某项</h3><p>和上一例配置文件格式一样，现在要修改其中某项：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i 's/^ssid=.*/ssid=abcdefg/' /etc/xxx.conf</span><br></pre></td></tr></tbody></table></figure>
<h2 id="技巧集"><a href="#技巧集" class="headerlink" title="技巧集"></a>技巧集</h2><p>sed命令一次替换多个文本<br></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed -e 's/11/22/' -e 's/55/99/' num.txt</span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="SED单行脚本快速参考（Unix-流编辑器）"><a href="#SED单行脚本快速参考（Unix-流编辑器）" class="headerlink" title="SED单行脚本快速参考（Unix 流编辑器）"></a>SED单行脚本快速参考（Unix 流编辑器）</h2><blockquote>
<p>via: <a href="http://sed.sourceforge.net/sed1line_zh-CN.html" rel="external nofollow noopener noreferrer" target="_blank">http://sed.sourceforge.net/sed1line_zh-CN.html</a></p>
</blockquote>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br></pre></td><td class="code"><pre><span class="line">​-------------------------------------------------------------------------</span><br><span class="line">SED单行脚本快速参考（Unix 流编辑器）                       2005年12月29日</span><br><span class="line"></span><br><span class="line">英文标题：USEFUL ONE-LINE SCRIPTS FOR SED (Unix stream editor)</span><br><span class="line">原标题：HANDY ONE-LINERS FOR SED (Unix stream editor)</span><br><span class="line"></span><br><span class="line">整理：Eric Pement  - 电邮：pemente[at]northpark[dot]edu         版本5.5</span><br><span class="line">译者：Joe Hong     - 电邮：hq00e[at]126[dot]com</span><br><span class="line"></span><br><span class="line">在以下地址可找到本文档的最新（英文）版本：</span><br><span class="line">   http://sed.sourceforge.net/sed1line.txt</span><br><span class="line">   http://www.pement.org/sed/sed1line.txt</span><br><span class="line"></span><br><span class="line">其他语言版本：</span><br><span class="line">  中文          - http://sed.sourceforge.net/sed1line_zh-CN.html</span><br><span class="line">  捷克语        - http://sed.sourceforge.net/sed1line_cz.html</span><br><span class="line">  荷语          - http://sed.sourceforge.net/sed1line_nl.html</span><br><span class="line">  法语          - http://sed.sourceforge.net/sed1line_fr.html</span><br><span class="line">  德语          - http://sed.sourceforge.net/sed1line_de.html</span><br><span class="line"></span><br><span class="line">  葡语          - http://sed.sourceforge.net/sed1line_pt-BR.html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">文本间隔：</span><br><span class="line">​--------</span><br><span class="line"></span><br><span class="line"> # 在每一行后面增加一空行</span><br><span class="line"> sed G</span><br><span class="line"></span><br><span class="line"> # 将原来的所有空行删除并在每一行后面增加一空行。</span><br><span class="line"> # 这样在输出的文本中每一行后面将有且只有一空行。</span><br><span class="line"> sed '/^$/d;G'</span><br><span class="line"></span><br><span class="line"> # 在每一行后面增加两行空行</span><br><span class="line"> sed 'G;G'</span><br><span class="line"></span><br><span class="line"> # 将第一个脚本所产生的所有空行删除（即删除所有偶数行）</span><br><span class="line"> sed 'n;d'</span><br><span class="line"></span><br><span class="line"> # 在匹配式样“regex”的行之前插入一空行</span><br><span class="line"> sed '/regex/{x;p;x;}'</span><br><span class="line"></span><br><span class="line"> # 在匹配式样“regex”的行之后插入一空行</span><br><span class="line"> sed '/regex/G'</span><br><span class="line"></span><br><span class="line"> # 在匹配式样“regex”的行之前和之后各插入一空行</span><br><span class="line"> sed '/regex/{x;p;x;G;}'</span><br><span class="line"></span><br><span class="line">编号：</span><br><span class="line">​--------</span><br><span class="line"></span><br><span class="line"> # 为文件中的每一行进行编号（简单的左对齐方式）。这里使用了“制表符”</span><br><span class="line"> # （tab，见本文末尾关于'\t'的用法的描述）而不是空格来对齐边缘。</span><br><span class="line"> sed = filename | sed 'N;s/\n/\t/'</span><br><span class="line"></span><br><span class="line"> # 对文件中的所有行编号（行号在左，文字右端对齐）。</span><br><span class="line"> sed = filename | sed 'N; s/^/     /; s/ *\(.\{6,\}\)\n/\1  /'</span><br><span class="line"></span><br><span class="line"> # 对文件中的所有行编号，但只显示非空白行的行号。</span><br><span class="line"> sed '/./=' filename | sed '/./N; s/\n/ /'</span><br><span class="line"></span><br><span class="line"> # 计算行数 （模拟 "wc -l"）</span><br><span class="line"> sed -n '$='</span><br><span class="line"></span><br><span class="line">文本转换和替代：</span><br><span class="line">​--------</span><br><span class="line"></span><br><span class="line"> # Unix环境：转换DOS的新行符（CR/LF）为Unix格式。</span><br><span class="line"> sed 's/.$//'                     # 假设所有行以CR/LF结束</span><br><span class="line"> sed 's/^M$//'                    # 在bash/tcsh中，将按Ctrl-M改为按Ctrl-V</span><br><span class="line"> sed 's/\x0D$//'                  # ssed、gsed 3.02.80，及更高版本</span><br><span class="line"></span><br><span class="line"> # Unix环境：转换Unix的新行符（LF）为DOS格式。</span><br><span class="line"> sed "s/$/`echo -e \\\r`/"        # 在ksh下所使用的命令</span><br><span class="line"> sed 's/$'"/`echo \\\r`/"         # 在bash下所使用的命令</span><br><span class="line"> sed "s/$/`echo \\\r`/"           # 在zsh下所使用的命令</span><br><span class="line"> sed 's/$/\r/'                    # gsed 3.02.80 及更高版本</span><br><span class="line"></span><br><span class="line"> # DOS环境：转换Unix新行符（LF）为DOS格式。</span><br><span class="line"> sed "s/$//"                      # 方法 1</span><br><span class="line"> sed -n p                         # 方法 2</span><br><span class="line"></span><br><span class="line"> # DOS环境：转换DOS新行符（CR/LF）为Unix格式。</span><br><span class="line"> # 下面的脚本只对UnxUtils sed 4.0.7 及更高版本有效。要识别UnxUtils版本的</span><br><span class="line"> #  sed可以通过其特有的“--text”选项。你可以使用帮助选项（“--help”）看</span><br><span class="line"> # 其中有无一个“--text”项以此来判断所使用的是否是UnxUtils版本。其它DOS</span><br><span class="line"> # 版本的的sed则无法进行这一转换。但可以用“tr”来实现这一转换。</span><br><span class="line"> sed "s/\r//" infile >outfile     # UnxUtils sed v4.0.7 或更高版本</span><br><span class="line"> tr -d \r <infile>outfile        # GNU tr 1.22 或更高版本</infile></span><br><span class="line"></span><br><span class="line"> # 将每一行前导的“空白字符”（空格，制表符）删除</span><br><span class="line"> # 使之左对齐</span><br><span class="line"> sed 's/^[ \t]*//'                # 见本文末尾关于'\t'用法的描述</span><br><span class="line"></span><br><span class="line"> # 将每一行拖尾的“空白字符”（空格，制表符）删除</span><br><span class="line"> sed 's/[ \t]*$//'                # 见本文末尾关于'\t'用法的描述</span><br><span class="line"></span><br><span class="line"> # 将每一行中的前导和拖尾的空白字符删除</span><br><span class="line"> sed 's/^[ \t]*//;s/[ \t]*$//'</span><br><span class="line"></span><br><span class="line"> # 在每一行开头处插入5个空格（使全文向右移动5个字符的位置）</span><br><span class="line"> sed 's/^/     /'</span><br><span class="line"></span><br><span class="line"> # 以79个字符为宽度，将所有文本右对齐</span><br><span class="line"> sed -e :a -e 's/^.\{1,78\}$/ &/;ta'  # 78个字符外加最后的一个空格</span><br><span class="line"></span><br><span class="line"> # 以79个字符为宽度，使所有文本居中。在方法1中，为了让文本居中每一行的前</span><br><span class="line"> # 头和后头都填充了空格。 在方法2中，在居中文本的过程中只在文本的前面填充</span><br><span class="line"> # 空格，并且最终这些空格将有一半会被删除。此外每一行的后头并未填充空格。</span><br><span class="line"> sed  -e :a -e 's/^.\{1,77\}$/ & /;ta'                     # 方法1</span><br><span class="line"> sed  -e :a -e 's/^.\{1,77\}$/ &/;ta' -e 's/\( *\)\1/\1/'  # 方法2</span><br><span class="line"></span><br><span class="line"> # 在每一行中查找字串“foo”，并将找到的“foo”替换为“bar”</span><br><span class="line"> sed 's/foo/bar/'                 # 只替换每一行中的第一个“foo”字串</span><br><span class="line"> sed 's/foo/bar/4'                # 只替换每一行中的第四个“foo”字串</span><br><span class="line"> sed 's/foo/bar/g'                # 将每一行中的所有“foo”都换成“bar”</span><br><span class="line"> sed 's/\(.*\)foo\(.*foo\)/\1bar\2/' # 替换倒数第二个“foo”</span><br><span class="line"> sed 's/\(.*\)foo/\1bar/'            # 替换最后一个“foo”</span><br><span class="line"></span><br><span class="line"> # 只在行中出现字串“baz”的情况下将“foo”替换成“bar”</span><br><span class="line"> sed '/baz/s/foo/bar/g'</span><br><span class="line"></span><br><span class="line"> # 将“foo”替换成“bar”，并且只在行中未出现字串“baz”的情况下替换</span><br><span class="line"> sed '/baz/!s/foo/bar/g'</span><br><span class="line"></span><br><span class="line"> # 不管是“scarlet”“ruby”还是“puce”，一律换成“red”</span><br><span class="line"> sed 's/scarlet/red/g;s/ruby/red/g;s/puce/red/g'  #对多数的sed都有效</span><br><span class="line"> gsed 's/scarlet\|ruby\|puce/red/g'               # 只对GNU sed有效</span><br><span class="line"></span><br><span class="line"> # 倒置所有行，第一行成为最后一行，依次类推（模拟“tac”）。</span><br><span class="line"> # 由于某些原因，使用下面命令时HHsed v1.5会将文件中的空行删除</span><br><span class="line"> sed '1!G;h;$!d'               # 方法1</span><br><span class="line"> sed -n '1!G;h;$p'             # 方法2</span><br><span class="line"></span><br><span class="line"> # 将行中的字符逆序排列，第一个字成为最后一字，……（模拟“rev”）</span><br><span class="line"> sed '/\n/!G;s/\(.\)\(.*\n\)/&\2\1/;//D;s/.//'</span><br><span class="line"></span><br><span class="line"> # 将每两行连接成一行（类似“paste”）</span><br><span class="line"> sed '$!N;s/\n/ /'</span><br><span class="line"></span><br><span class="line"> # 如果当前行以反斜杠“\”结束，则将下一行并到当前行末尾</span><br><span class="line"> # 并去掉原来行尾的反斜杠</span><br><span class="line"> sed -e :a -e '/\\$/N; s/\\\n//; ta'</span><br><span class="line"></span><br><span class="line"> # 如果当前行以等号开头，将当前行并到上一行末尾</span><br><span class="line"> # 并以单个空格代替原来行头的“=”</span><br><span class="line"> sed -e :a -e '$!N;s/\n=/ /;ta' -e 'P;D'</span><br><span class="line"></span><br><span class="line"> # 为数字字串增加逗号分隔符号，将“1234567”改为“1,234,567”</span><br><span class="line"> gsed ':a;s/\B[0-9]\{3\}\>/,&/;ta'                     # GNU sed</span><br><span class="line"> sed -e :a -e 's/\(.*[0-9]\)\([0-9]\{3\}\)/\1,\2/;ta'  # 其他sed</span><br><span class="line"></span><br><span class="line"> # 为带有小数点和负号的数值增加逗号分隔符（GNU sed）</span><br><span class="line"> gsed -r ':a;s/(^|[^0-9.])([0-9]+)([0-9]{3})/\1\2,\3/g;ta'</span><br><span class="line"></span><br><span class="line"> # 在每5行后增加一空白行 （在第5，10，15，20，等行后增加一空白行）</span><br><span class="line"> gsed '0~5G'                      # 只对GNU sed有效</span><br><span class="line"> sed 'n;n;n;n;G;'                 # 其他sed</span><br><span class="line"></span><br><span class="line">选择性地显示特定行：</span><br><span class="line">​--------</span><br><span class="line"></span><br><span class="line"> # 显示文件中的前10行 （模拟“head”的行为）</span><br><span class="line"> sed 10q</span><br><span class="line"></span><br><span class="line"> # 显示文件中的第一行 （模拟“head -1”命令）</span><br><span class="line"> sed q</span><br><span class="line"></span><br><span class="line"> # 显示文件中的最后10行 （模拟“tail”）</span><br><span class="line"> sed -e :a -e '$q;N;11,$D;ba'</span><br><span class="line"></span><br><span class="line"> # 显示文件中的最后2行（模拟“tail -2”命令）</span><br><span class="line"> sed '$!N;$!D'</span><br><span class="line"></span><br><span class="line"> # 显示文件中的最后一行（模拟“tail -1”）</span><br><span class="line"> sed '$!d'                        # 方法1</span><br><span class="line"> sed -n '$p'                      # 方法2</span><br><span class="line"></span><br><span class="line"> # 显示文件中的倒数第二行</span><br><span class="line"> sed -e '$!{h;d;}' -e x              # 当文件中只有一行时，输入空行</span><br><span class="line"> sed -e '1{$q;}' -e '$!{h;d;}' -e x  # 当文件中只有一行时，显示该行</span><br><span class="line"> sed -e '1{$d;}' -e '$!{h;d;}' -e x  # 当文件中只有一行时，不输出</span><br><span class="line"></span><br><span class="line"> # 只显示匹配正则表达式的行（模拟“grep”）</span><br><span class="line"> sed -n '/regexp/p'               # 方法1</span><br><span class="line"> sed '/regexp/!d'                 # 方法2</span><br><span class="line"></span><br><span class="line"> # 只显示“不”匹配正则表达式的行（模拟“grep -v”）</span><br><span class="line"> sed -n '/regexp/!p'              # 方法1，与前面的命令相对应</span><br><span class="line"> sed '/regexp/d'                  # 方法2，类似的语法</span><br><span class="line"></span><br><span class="line"> # 查找“regexp”并将匹配行的上一行显示出来，但并不显示匹配行</span><br><span class="line"> sed -n '/regexp/{g;1!p;};h'</span><br><span class="line"></span><br><span class="line"> # 查找“regexp”并将匹配行的下一行显示出来，但并不显示匹配行</span><br><span class="line"> sed -n '/regexp/{n;p;}'</span><br><span class="line"></span><br><span class="line"> # 显示包含“regexp”的行及其前后行，并在第一行之前加上“regexp”所</span><br><span class="line"> # 在行的行号 （类似“grep -A1 -B1”）</span><br><span class="line"> sed -n -e '/regexp/{=;x;1!p;g;$!N;p;D;}' -e h</span><br><span class="line"></span><br><span class="line"> # 显示包含“AAA”、“BBB”或“CCC”的行（任意次序）</span><br><span class="line"> sed '/AAA/!d; /BBB/!d; /CCC/!d'  # 字串的次序不影响结果</span><br><span class="line"></span><br><span class="line"> # 显示包含“AAA”、“BBB”和“CCC”的行（固定次序）</span><br><span class="line"> sed '/AAA.*BBB.*CCC/!d'</span><br><span class="line"></span><br><span class="line"> # 显示包含“AAA”“BBB”或“CCC”的行 （模拟“egrep”）</span><br><span class="line"> sed -e '/AAA/b' -e '/BBB/b' -e '/CCC/b' -e d    # 多数sed</span><br><span class="line"> gsed '/AAA\|BBB\|CCC/!d'                        # 对GNU sed有效</span><br><span class="line"></span><br><span class="line"> # 显示包含“AAA”的段落 （段落间以空行分隔）</span><br><span class="line"> # HHsed v1.5 必须在“x;”后加入“G;”，接下来的3个脚本都是这样</span><br><span class="line"> sed -e '/./{H;$!d;}' -e 'x;/AAA/!d;'</span><br><span class="line"></span><br><span class="line"> # 显示包含“AAA”“BBB”和“CCC”三个字串的段落 （任意次序）</span><br><span class="line"> sed -e '/./{H;$!d;}' -e 'x;/AAA/!d;/BBB/!d;/CCC/!d'</span><br><span class="line"></span><br><span class="line"> # 显示包含“AAA”、“BBB”、“CCC”三者中任一字串的段落 （任意次序）</span><br><span class="line"> sed -e '/./{H;$!d;}' -e 'x;/AAA/b' -e '/BBB/b' -e '/CCC/b' -e d</span><br><span class="line"> gsed '/./{H;$!d;};x;/AAA\|BBB\|CCC/b;d'         # 只对GNU sed有效</span><br><span class="line"></span><br><span class="line"> # 显示包含65个或以上字符的行</span><br><span class="line"> sed -n '/^.\{65\}/p'</span><br><span class="line"></span><br><span class="line"> # 显示包含65个以下字符的行</span><br><span class="line"> sed -n '/^.\{65\}/!p'            # 方法1，与上面的脚本相对应</span><br><span class="line"> sed '/^.\{65\}/d'                # 方法2，更简便一点的方法</span><br><span class="line"></span><br><span class="line"> # 显示部分文本——从包含正则表达式的行开始到最后一行结束</span><br><span class="line"> sed -n '/regexp/,$p'</span><br><span class="line"></span><br><span class="line"> # 显示部分文本——指定行号范围（从第8至第12行，含8和12行）</span><br><span class="line"> sed -n '8,12p'                   # 方法1</span><br><span class="line"> sed '8,12!d'                     # 方法2</span><br><span class="line"></span><br><span class="line"> # 显示第52行</span><br><span class="line"> sed -n '52p'                     # 方法1</span><br><span class="line"> sed '52!d'                       # 方法2</span><br><span class="line"> sed '52q;d'                      # 方法3, 处理大文件时更有效率</span><br><span class="line"></span><br><span class="line"> # 从第3行开始，每7行显示一次    </span><br><span class="line"> gsed -n '3~7p'                   # 只对GNU sed有效</span><br><span class="line"> sed -n '3,${p;n;n;n;n;n;n;}'     # 其他sed</span><br><span class="line"></span><br><span class="line"> # 显示两个正则表达式之间的文本（包含）</span><br><span class="line"> sed -n '/Iowa/,/Montana/p'       # 区分大小写方式</span><br><span class="line"></span><br><span class="line">选择性地删除特定行：</span><br><span class="line">​--------</span><br><span class="line"></span><br><span class="line"> # 显示通篇文档，除了两个正则表达式之间的内容</span><br><span class="line"> sed '/Iowa/,/Montana/d'</span><br><span class="line"></span><br><span class="line"> # 删除文件中相邻的重复行（模拟“uniq”）</span><br><span class="line"> # 只保留重复行中的第一行，其他行删除</span><br><span class="line"> sed '$!N; /^\(.*\)\n\1$/!P; D'</span><br><span class="line"></span><br><span class="line"> # 删除文件中的重复行，不管有无相邻。注意hold space所能支持的缓存</span><br><span class="line"> # 大小，或者使用GNU sed。</span><br><span class="line"> sed -n 'G; s/\n/&&/; /^\([ -~]*\n\).*\n\1/d; s/\n//; h; P'</span><br><span class="line"></span><br><span class="line"> # 删除除重复行外的所有行（模拟“uniq -d”）</span><br><span class="line"> sed '$!N; s/^\(.*\)\n\1$/\1/; t; D'</span><br><span class="line"></span><br><span class="line"> # 删除文件中开头的10行</span><br><span class="line"> sed '1,10d'</span><br><span class="line"></span><br><span class="line"> # 删除文件中的最后一行</span><br><span class="line"> sed '$d'</span><br><span class="line"></span><br><span class="line"> # 删除文件中的最后两行</span><br><span class="line"> sed 'N;$!P;$!D;$d'</span><br><span class="line"></span><br><span class="line"> # 删除文件中的最后10行</span><br><span class="line"> sed -e :a -e '$d;N;2,10ba' -e 'P;D'   # 方法1</span><br><span class="line"> sed -n -e :a -e '1,10!{P;N;D;};N;ba'  # 方法2</span><br><span class="line"></span><br><span class="line"> # 删除8的倍数行</span><br><span class="line"> gsed '0~8d'                           # 只对GNU sed有效</span><br><span class="line"> sed 'n;n;n;n;n;n;n;d;'                # 其他sed</span><br><span class="line"></span><br><span class="line"> # 删除匹配式样的行</span><br><span class="line"> sed '/pattern/d'                      # 删除含pattern的行。当然pattern</span><br><span class="line">                                       # 可以换成任何有效的正则表达式</span><br><span class="line"></span><br><span class="line"> # 删除文件中的所有空行（与“grep '.' ”效果相同）</span><br><span class="line"> sed '/^$/d'                           # 方法1</span><br><span class="line"> sed '/./!d'                           # 方法2</span><br><span class="line"></span><br><span class="line"> # 只保留多个相邻空行的第一行。并且删除文件顶部和尾部的空行。</span><br><span class="line"> # （模拟“cat -s”）</span><br><span class="line"> sed '/./,/^$/!d'        #方法1，删除文件顶部的空行，允许尾部保留一空行</span><br><span class="line"> sed '/^$/N;/\n$/D'      #方法2，允许顶部保留一空行，尾部不留空行</span><br><span class="line"></span><br><span class="line"> # 只保留多个相邻空行的前两行。</span><br><span class="line"> sed '/^$/N;/\n$/N;//D'</span><br><span class="line"></span><br><span class="line"> # 删除文件顶部的所有空行</span><br><span class="line"> sed '/./,$!d'</span><br><span class="line"></span><br><span class="line"> # 删除文件尾部的所有空行</span><br><span class="line"> sed -e :a -e '/^\n*$/{$d;N;ba' -e '}'  # 对所有sed有效</span><br><span class="line"> sed -e :a -e '/^\n*$/N;/\n$/ba'        # 同上，但只对 gsed 3.02.*有效</span><br><span class="line"></span><br><span class="line"> # 删除每个段落的最后一行</span><br><span class="line"> sed -n '/^$/{p;h;};/./{x;/./p;}'</span><br><span class="line"></span><br><span class="line">特殊应用：</span><br><span class="line">​--------</span><br><span class="line"></span><br><span class="line"> # 移除手册页（man page）中的nroff标记。在Unix System V或bash shell下使</span><br><span class="line"> # 用'echo'命令时可能需要加上 -e 选项。</span><br><span class="line"> sed "s/.`echo \\\b`//g"    # 外层的双括号是必须的（Unix环境）</span><br><span class="line"> sed 's/.^H//g'             # 在bash或tcsh中, 按 Ctrl-V 再按 Ctrl-H</span><br><span class="line"> sed 's/.\x08//g'           # sed 1.5，GNU sed，ssed所使用的十六进制的表示方法</span><br><span class="line"></span><br><span class="line"> # 提取新闻组或 e-mail 的邮件头</span><br><span class="line"> sed '/^$/q'                # 删除第一行空行后的所有内容</span><br><span class="line"></span><br><span class="line"> # 提取新闻组或 e-mail 的正文部分</span><br><span class="line"> sed '1,/^$/d'              # 删除第一行空行之前的所有内容</span><br><span class="line"></span><br><span class="line"> # 从邮件头提取“Subject”（标题栏字段），并移除开头的“Subject:”字样</span><br><span class="line"> sed '/^Subject: */!d; s///;q'</span><br><span class="line"></span><br><span class="line"> # 从邮件头获得回复地址</span><br><span class="line"> sed '/^Reply-To:/q; /^From:/h; /./d;g;q'</span><br><span class="line"></span><br><span class="line"> # 获取邮件地址。在上一个脚本所产生的那一行邮件头的基础上进一步的将非电邮</span><br><span class="line"> # 地址的部分剃除。（见上一脚本）</span><br><span class="line"> sed 's/ *(.*)//; s/>.*//; s/.*[:<] * '< span><br><span class="line"></span><br><span class="line"> # 在每一行开头加上一个尖括号和空格（引用信息）</span><br><span class="line"> sed 's/^/> /'</span><br><span class="line"></span><br><span class="line"> # 将每一行开头处的尖括号和空格删除（解除引用）</span><br><span class="line"> sed 's/^> //'</span><br><span class="line"></span><br><span class="line"> # 移除大部分的HTML标签（包括跨行标签）</span><br><span class="line"> sed -e :a -e 's/<[^>]*>//g;/<br><span class="line"></span><br><span class="line"> # 将分成多卷的uuencode文件解码。移除文件头信息，只保留uuencode编码部分。</span><br><span class="line"> # 文件必须以特定顺序传给sed。下面第一种版本的脚本可以直接在命令行下输入；</span><br><span class="line"> # 第二种版本则可以放入一个带执行权限的shell脚本中。（由Rahul Dhesi的一</span><br><span class="line"> # 个脚本修改而来。）</span><br><span class="line"> sed '/^end/,/^begin/d' file1 file2 ... fileX | uudecode   # vers. 1</span><br><span class="line"> sed '/^end/,/^begin/d' "$@" | uudecode                    # vers. 2</span><br><span class="line"></span><br><span class="line"> # 将文件中的段落以字母顺序排序。段落间以（一行或多行）空行分隔。GNU sed使用</span><br><span class="line"> # 字元“\v”来表示垂直制表符，这里用它来作为换行符的占位符——当然你也可以</span><br><span class="line"> # 用其他未在文件中使用的字符来代替它。</span><br><span class="line"> sed '/./{H;d;};x;s/\n/={NL}=/g' file | sort | sed '1s/={NL}=//;s/={NL}=/\n/g'</span><br><span class="line"> gsed '/./{H;d};x;y/\n/\v/' file | sort | sed '1s/\v//;y/\v/\n/'</span><br><span class="line"></span><br><span class="line"> # 分别压缩每个.TXT文件，压缩后删除原来的文件并将压缩后的.ZIP文件</span><br><span class="line"> # 命名为与原来相同的名字（只是扩展名不同）。（DOS环境：“dir /b”</span><br><span class="line"> # 显示不带路径的文件名）。</span><br><span class="line"> echo @echo off >zipup.bat</span><br><span class="line"> dir /b *.txt | sed "s/^\(.*\)\.TXT/pkzip -mo \1 \1.TXT/" >>zipup.bat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">使用SED：Sed接受一个或多个编辑命令，并且每读入一行后就依次应用这些命令。</span><br><span class="line">当读入第一行输入后，sed对其应用所有的命令，然后将结果输出。接着再读入第二</span><br><span class="line">行输入，对其应用所有的命令……并重复这个过程。上一个例子中sed由标准输入设</span><br><span class="line">备（即命令解释器，通常是以管道输入的形式）获得输入。在命令行给出一个或多</span><br><span class="line">个文件名作为参数时，这些文件取代标准输入设备成为sed的输入。sed的输出将被</span><br><span class="line">送到标准输出（显示器）。因此：</span><br><span class="line"></span><br><span class="line"> cat filename | sed '10q'         # 使用管道输入</span><br><span class="line"> sed '10q' filename               # 同样效果，但不使用管道输入</span><br><span class="line"> sed '10q' filename > newfile     # 将输出转移（重定向）到磁盘上</span><br><span class="line"></span><br><span class="line">要了解sed命令的使用说明，包括如何通过脚本文件（而非从命令行）来使用这些命</span><br><span class="line">令，请参阅《sed & awk》第二版，作者Dale Dougherty和Arnold Robbins</span><br><span class="line">（O'Reilly，1997；http://www.ora.com），《UNIX Text Processing》，作者</span><br><span class="line">Dale Dougherty和Tim O'Reilly（Hayden Books，1987）或者是Mike Arst写的教</span><br><span class="line">程——压缩包的名称是“U-SEDIT2.ZIP”（在许多站点上都找得到）。要发掘sed</span><br><span class="line">的潜力，则必须对“正则表达式”有足够的理解。正则表达式的资料可以看</span><br><span class="line">《Mastering Regular Expressions》作者Jeffrey Friedl（O'reilly 1997）。</span><br><span class="line">Unix系统所提供的手册页（“man”）也会有所帮助（试一下这些命令</span><br><span class="line">“man sed”、“man regexp”，或者看“man ed”中关于正则表达式的部分），但</span><br><span class="line">手册提供的信息比较“抽象”——这也是它一直为人所诟病的。不过，它本来就不</span><br><span class="line">是用来教初学者如何使用sed或正则表达式的教材，而只是为那些熟悉这些工具的人</span><br><span class="line">提供的一些文本参考。</span><br><span class="line"></span><br><span class="line">括号语法：前面的例子对sed命令基本上都使用单引号（'...'）而非双引号</span><br><span class="line">（"..."）这是因为sed通常是在Unix平台上使用。单引号下，Unix的shell（命令</span><br><span class="line">解释器）不会对美元符（$）和后引号（`...`）进行解释和执行。而在双引号下</span><br><span class="line">美元符会被展开为变量或参数的值，后引号中的命令被执行并以输出的结果代替</span><br><span class="line">后引号中的内容。而在“csh”及其衍生的shell中使用感叹号（!）时需要在其前</span><br><span class="line">面加上转义用的反斜杠（就像这样：\!）以保证上面所使用的例子能正常运行</span><br><span class="line">（包括使用单引号的情况下）。DOS版本的Sed则一律使用双引号（"..."）而不是</span><br><span class="line">引号来圈起命令。</span><br><span class="line"></span><br><span class="line">'\t'的用法：为了使本文保持行文简洁，我们在脚本中使用'\t'来表示一个制表</span><br><span class="line">符。但是现在大部分版本的sed还不能识别'\t'的简写方式，因此当在命令行中为</span><br><span class="line">脚本输入制表符时，你应该直接按TAB键来输入制表符而不是输入'\t'。下列的工</span><br><span class="line">具软件都支持'\t'做为一个正则表达式的字元来表示制表符：awk、perl、HHsed、</span><br><span class="line">sedmod以及GNU sed v3.02.80。</span><br><span class="line"></span><br><span class="line">不同版本的SED：不同的版本间的sed会有些不同之处，可以想象它们之间在语法上</span><br><span class="line">会有差异。具体而言，它们中大部分不支持在编辑命令中间使用标签（:name）或分</span><br><span class="line">支命令（b,t），除非是放在那些的末尾。这篇文档中我们尽量选用了可移植性较高</span><br><span class="line">的语法，以使大多数版本的sed的用户都能使用这些脚本。不过GNU版本的sed允许使</span><br><span class="line">用更简洁的语法。想像一下当读者看到一个很长的命令时的心情：</span><br><span class="line"></span><br><span class="line">   sed -e '/AAA/b' -e '/BBB/b' -e '/CCC/b' -e d</span><br><span class="line"></span><br><span class="line">好消息是GNU sed能让命令更紧凑：</span><br><span class="line"></span><br><span class="line">   sed '/AAA/b;/BBB/b;/CCC/b;d'      # 甚至可以写成</span><br><span class="line">   sed '/AAA\|BBB\|CCC/b;d'</span><br><span class="line"></span><br><span class="line">此外，请注意虽然许多版本的sed接受象“/one/ s/RE1/RE2/”这种在's'前带有空</span><br><span class="line">格的命令，但这些版本中有些却不接受这样的命令:“/one/! s/RE1/RE2/”。这时</span><br><span class="line">只需要把中间的空格去掉就行了。</span><br><span class="line"></span><br><span class="line">速度优化：当由于某种原因（比如输入文件较大、处理器或硬盘较慢等）需要提高</span><br><span class="line">命令执行速度时，可以考虑在替换命令（“s/.../.../”）前面加上地址表达式来</span><br><span class="line">提高速度。举例来说：</span><br><span class="line"></span><br><span class="line">   sed 's/foo/bar/g' filename         # 标准替换命令</span><br><span class="line">   sed '/foo/ s/foo/bar/g' filename   # 速度更快</span><br><span class="line">   sed '/foo/ s//bar/g' filename      # 简写形式</span><br><span class="line"></span><br><span class="line">当只需要显示文件的前面的部分或需要删除后面的内容时，可以在脚本中使用“q”</span><br><span class="line">命令（退出命令）。在处理大的文件时，这会节省大量时间。因此：</span><br><span class="line"></span><br><span class="line">   sed -n '45,50p' filename           # 显示第45到50行</span><br><span class="line">   sed -n '51q;45,50p' filename       # 一样，但快得多</span><br><span class="line"></span><br><span class="line">如果你有其他的单行脚本想与大家分享或者你发现了本文档中错误的地方，请发电</span><br><span class="line">子邮件给本文档的作者（Eric Pement）。邮件中请记得提供你所使用的sed版本、 </span><br><span class="line">该sed所运行的操作系统及对问题的适当描述。本文所指的单行脚本指命令行的长</span><br><span class="line">度在65个字符或65个以下的sed脚本〔译注1〕。本文档的各种脚本是由以下所列作</span><br><span class="line">者所写或提供：</span><br><span class="line"></span><br><span class="line"> Al Aab                               # 建立了“seders”邮件列表</span><br><span class="line"> Edgar Allen                          # 许多方面</span><br><span class="line"> Yiorgos Adamopoulos                  # 许多方面</span><br><span class="line"> Dale Dougherty                       # 《sed & awk》作者</span><br><span class="line"> Carlos Duarte                        # 《do it with sed》作者</span><br><span class="line"> Eric Pement                          # 本文档的作者</span><br><span class="line"> Ken Pizzini                          # GNU sed v3.02 的作者</span><br><span class="line"> S.G. Ravenhall                       # 去html标签脚本</span><br><span class="line"> Greg Ubben                           # 有诸多贡献并提供了许多帮助</span><br><span class="line">​-------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">译注1：大部分情况下，sed脚本无论多长都能写成单行的形式（通过`-e'选项和`;'</span><br><span class="line">号）——只要命令解释器支持，所以这里说的单行脚本除了能写成一行还对长度有</span><br><span class="line">所限制。因为这些单行脚本的意义不在于它们是以单行的形式出现。而是让用户能</span><br><span class="line">方便地在命令行中使用这些紧凑的脚本才是其意义所在。</span><br><!--[^--></span><!--]--></span></pre></td></tr></tbody></table></figure>
<h2 id="sed命令详解"><a href="#sed命令详解" class="headerlink" title="sed命令详解"></a>sed命令详解</h2><blockquote>
<p>via: <a href="http://qifuguang.me/2015/09/21/sed命令详解/" rel="external nofollow noopener noreferrer" target="_blank">http://qifuguang.me/2015/09/21/sed命令详解/</a></p>
</blockquote>
<p>sed是stream editor的简称，也就是流编辑器。<br>它一次处理一行内容，处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），<br>接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。<br>接着处理下一行，这样不断重复，直到文件末尾。<br>文件内容并没有改变，除非你使用重定向存储输出。</p>
<hr>
<h3 id="使用语法"><a href="#使用语法" class="headerlink" title="使用语法"></a>使用语法</h3><p>sed命令的使用规则是这样的：<br><code>sed [option] 'command' input_file</code></p>
<p>其中option是可选的，常用的option有如下几种：</p>
<ul>
<li>-n 使用安静(silent)模式（想不通为什么不是-s）。在一般sed的用法中，所有来自stdin的内容一般都会被列出到屏幕上。但如果加上-n参数后，则只有经过sed特殊处理的那一行(或者动作)才会被列出来；</li>
<li>-e 直接在指令列模式上进行 sed 的动作编辑；</li>
<li>-f 直接将 sed 的动作写在一个文件内， <code>-f filename</code> 则可以执行filename内的sed命令；</li>
<li>-r 让sed命令支持扩展的正则表达式(默认是基础正则表达式)；</li>
<li>-i 直接修改读取的文件内容，而不是由屏幕输出。</li>
</ul>
<hr>
<h3 id="常用的命令有以下几种："><a href="#常用的命令有以下几种：" class="headerlink" title="常用的命令有以下几种："></a>常用的命令有以下几种：</h3><ul>
<li>a： append即追加字符串， <code>a</code>的后面跟上字符串<code>s</code>(多行字符串可以用\n分隔)，则会在当前选择的行的后面都加上字符串s；</li>
<li>c： 取代/替换字符串，<code>c</code>后面跟上字符串<code>s</code>(多行字符串可以用<code>\n</code>分隔)，则会将当前选中的行替换成字符串s；</li>
<li>d： delete即删除，该命令会将当前选中的行删除；</li>
<li>i： insert即插入字符串，<code>i</code>后面跟上字符串<code>s</code>(多行字符串可以用<code>\n</code>分隔)，则会在当前选中的行的前面都插入字符串s；</li>
<li>p： print即打印，该命令会打印当前选择的行到屏幕上；</li>
<li>s： 替换，通常<code>s</code>命到第三行写成1令的用法是这样的：<code>1,2s/old/new/g</code>，将<code>old</code>字符串替换成<code>new</code>字符串</li>
</ul>
<hr>
<h3 id="命令示例"><a href="#命令示例" class="headerlink" title="命令示例"></a>命令示例</h3><p>假设有一个本地文件test.txt，文件内容如下：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ cat test.txt</span><br><span class="line">this is first line</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">this is fourth line</span><br><span class="line">this fifth line</span><br><span class="line">happy everyday</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本节将使用该文件详细演示每一个命令的用法。</p>
<h4 id="a命令"><a href="#a命令" class="headerlink" title="a命令"></a>a命令</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '1a \add one' test.txt</span><br><span class="line">this is first line</span><br><span class="line">add one</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">this is fourth line</span><br><span class="line">this is fifth line</span><br><span class="line">happy everyday</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本例命令部分中的1表示第一行，同样的第二行写成<code>2</code>，第一行到第三行写成<code>1,3</code>，用<code>$</code>表示最后一行，比如<code>2,$</code>表示第二行到最后一行中间所有的行(包含第二行和最后一行)。<br>本例的作用是在第一行之后增加字符串<code>add one</code>，从输出可以看到具体效果。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '1,$a \add one' test.txt</span><br><span class="line">this is first line</span><br><span class="line">add one</span><br><span class="line">this is second line</span><br><span class="line">add one</span><br><span class="line">this is third line</span><br><span class="line">add one</span><br><span class="line">this is fourth line</span><br><span class="line">add one</span><br><span class="line">this is fifth line</span><br><span class="line">add one</span><br><span class="line">happy everyday</span><br><span class="line">add one</span><br><span class="line">end</span><br><span class="line">add one</span><br></pre></td></tr></tbody></table></figure>
<p>本例表示在第一行和最后一行所有的行后面都加上<code>add one</code>字符串，从输出可以看到效果。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '/first/a \add one' test.txt</span><br><span class="line">this is first line</span><br><span class="line">add one</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">this is fourth line</span><br><span class="line">this is fifth line</span><br><span class="line">happy everyday</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本例表示在包含<code>first</code>字符串的行的后面加上字符串<code>add one</code>，从输出可以看到第一行包含<code>first</code>，所以第一行之后增加了<code>add one</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '/^ha.*day$/a \add one' test.txt</span><br><span class="line">this is first line</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">this is fourth line</span><br><span class="line">this is fifth line</span><br><span class="line">happy everyday</span><br><span class="line">add one</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本例使用正则表达式匹配行，<code>^ha.*day$</code>表示以<code>ha</code>开头，以<code>day</code>结尾的行，则可以匹配到文件的<code>happy everyday</code>这样，所以在该行后面增加了<code>add one</code>字符串。</p>
<h4 id="i命令"><a href="#i命令" class="headerlink" title="i命令"></a>i命令</h4><p>i命令使用方法和a命令一样的，只不过是在匹配的行的前面插入字符串，所以直接将上面a命令的示例的<code>a</code>替换成<code>i</code>即可，在此就不啰嗦了。</p>
<h4 id="c命令"><a href="#c命令" class="headerlink" title="c命令"></a>c命令</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '$c \add one' test.txt</span><br><span class="line">this is first line</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">this is fourth line</span><br><span class="line">this is     fifth line</span><br><span class="line">happy everyday</span><br><span class="line">add one</span><br></pre></td></tr></tbody></table></figure>
<p>本例表示将最后一行替换成字符串<code>add one</code>，从输出可以看到效果。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '4,$c \add one' test.txt</span><br><span class="line">this is first line</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">add one</span><br></pre></td></tr></tbody></table></figure>
<p>本例将第四行到最后一行的内容替换成字符串<code>add one</code>。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '/^ha.*day$/c \replace line' test.txt</span><br><span class="line">this is first line</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">this is fourth line</span><br><span class="line">this is fifth line</span><br><span class="line">replace line</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本例将以<code>ha</code>开头，以<code>day</code>结尾的行替换成<code>replace line</code>。</p>
<h4 id="d命令"><a href="#d命令" class="headerlink" title="d命令"></a>d命令</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '/^ha.*day$/d' test.txt</span><br><span class="line">this is first line</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">this is fourth line</span><br><span class="line">this is fifth line</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本例删除以<code>ha</code>开头，以<code>day</code>结尾的行。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '4,$d' test.txt</span><br><span class="line">this is first line</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br></pre></td></tr></tbody></table></figure>
<p>本例删除第四行到最后一行中的内容。</p>
<h4 id="p命令"><a href="#p命令" class="headerlink" title="p命令"></a>p命令</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed -n '4,$p' test.txt</span><br><span class="line">this is fourth line</span><br><span class="line">this is fifth line</span><br><span class="line">happy everyday</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本例在屏幕上打印第四行到最后一行的内容，p命令一般和-n选项一起使用。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed -n '/^ha.*day$/p' test.txt</span><br><span class="line">happy everyday</span><br></pre></td></tr></tbody></table></figure>
<p>本例打印以<code>ha</code>开始，以<code>day</code>结尾的行。</p>
<h4 id="s命令"><a href="#s命令" class="headerlink" title="s命令"></a>s命令</h4><p>实际运用中s命令是最常使用到的。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed 's/line/text/g' test.txt</span><br><span class="line">this is first text</span><br><span class="line">this is second text</span><br><span class="line">this is third text</span><br><span class="line">this is fourth text</span><br><span class="line">this is fifth text</span><br><span class="line">happy everyday</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本例将文件中的所有<code>line</code>替换成<code>text</code>，最后的<code>g</code>是global的意思，也就是全局替换，如果不加<code>g</code>，则只会替换本行的第一个<code>line</code>。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed '/^ha.*day$/s/happy/very happy/g' test.txt</span><br><span class="line">this is first line</span><br><span class="line">this is second line</span><br><span class="line">this is third line</span><br><span class="line">this is fourth line</span><br><span class="line">this is fifth line</span><br><span class="line">very happy everyday</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>本例首先匹配以<code>ha</code>开始，以<code>day</code>结尾的行，本例中匹配到的行是<code>happy everyday</code>这样，然后再将该行中的<code>happy</code>替换成<code>very happy</code>。</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed 's/\(.*\)line$/\1/g' test.txt</span><br><span class="line">this is first</span><br><span class="line">this is second</span><br><span class="line">this is third</span><br><span class="line">this is fourth</span><br><span class="line">this is fifth</span><br><span class="line">happy everyday</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>这个例子有点复杂，先分解一下。首先s命令的模式是<code>s/old/new/g</code>这样的，所以本例的old部分即<code>\(.*\)line$</code>,sed命令中使用<code>\(\)</code>包裹的内容表示正则表达式的第n部分，序号从1开始计算，本例中只有一个<code>\(\)</code>所以<code>\(.*\)</code>表示正则表达式的第一部分，这部分匹配任意字符串，所以<code>\(.*\)line$</code>匹配的就是以line结尾的任何行。然后将匹配到的行替换成正则表达式的第一部分（本例中相当于删除<code>line</code>部分），使用<code>\1</code>表示匹配到的第一部分，同样<code>\2</code>表示第二部分，<code>\3</code>表示第三部分，可以依次这样引用。比如下面的例子：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[qifuguang@winwill~]$ sed 's/\(.*\)is\(.*\)line/\1\2/g' test.txt</span><br><span class="line">this  first</span><br><span class="line">this  second</span><br><span class="line">this  third</span><br><span class="line">this  fourth</span><br><span class="line">this  fifth</span><br><span class="line">happy everyday</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>正则表达式中<code>is</code>两边的部分可以用<code>\1</code>和<code>\2</code>表示，该例子的作用其实就是删除中间部分的<code>is</code>。</p>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>


    <nav id="article-nav">
    
        <a href="/wiki/心理学/vals-value-and-lifesylte/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    VALS_value-and-lifesylte
                
            </div>
        </a>
    
    
        <a href="/wiki/日常/信用卡被盗刷怎么办/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">信用卡被盗刷怎么办</div>
        </a>
    
</nav>





    




<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            Noodlefighter © 2019 
            <a rel="license external nofollow noopener noreferrer" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank"><img alt="知识共享署名-非商业性使用 4.0 国际许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png"></a>
            <br> Powered by <a href="http://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten" rel="external nofollow noopener noreferrer" target="_blank">wikitten</a>
            
        </div>
    </div>
</footer>

        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <meta name="generator" content="Hexo 3.9.0"><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    




<script src="/js/main.js"></script>

        <div style="display:none"><script src="https://s4.cnzz.com/z_stat.php?id=5956290&web_id=5956290" language="JavaScript"></script></div>

    </div>


</body></html><!-- baidu url auto push script --><!-- Custom Scripts -->